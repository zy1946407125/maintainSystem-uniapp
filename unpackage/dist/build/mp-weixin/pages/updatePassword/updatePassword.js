(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/updatePassword/updatePassword"],{"7feb":function(e,t,n){"use strict";(function(e){n("c6f8");o(n("66fd"));var t=o(n("fccd"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"824c":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{time:0,captchaText:"获取验证码",formData:{id:"",phone:"",password1:"",password2:"",code:""},rules:{password1:{rules:[{required:!0,errorMessage:"请输入新密码"}]},password2:{rules:[{required:!0,errorMessage:"请再次输入密码"}]},code:{rules:[{required:!0,errorMessage:"请输入姓名"}]}}}},methods:{submit:function(){var t=this;this.$refs.form.submit().then((function(n){if(t.formData.password1!==t.formData.password2)e.showToast({title:"密码不一致",icon:"none"});else{var o=t;e.showLoading({});var a=o.formData.password2,s=n.code,i=getApp().globalData.token;e.request({url:getApp().globalData.BASE_URL+"/user/changePassword",data:{token:i,password:a,code:s},header:{},success:function(t){if(console.log(t),e.hideLoading(),444===t.data.status)e.showToast({title:"您的登录信息已过期，请重新登录",duration:2e3,icon:"none",success:function(){setTimeout((function(){e.reLaunch({url:"/pages/login/login"})}),2e3)}});else if(445===t.data.status)e.showToast({title:"您没有此操作权限",duration:2e3,icon:"none"});else if(1===t.data){console.log("清空用户缓存信息");try{e.removeStorageSync("user")}catch(n){console.log("清空用户信息失败")}try{e.removeStorageSync("typeIndex")}catch(n){console.log("清空用户类别失败")}e.showToast({title:"修改成功",duration:2e3,success:function(){setTimeout((function(){e.reLaunch({url:"/pages/login/login"})}),2e3)}})}else 2===t.data?e.showToast({title:"验证码错误",duration:2e3,icon:"none"}):e.showToast({title:"修改失败",duration:2e3,icon:"none"})}})}})).catch((function(e){console.log("表单错误信息：",e)}))},getCaptcha:function(){if(0!=this.time)return e.showToast({title:"请"+this.time+"s后再重新获取",icon:"none"}),!1;if(""===this.formData.phone||null===this.formData.phone)e.showToast({title:"请输入新手机号",icon:"none"});else{var t=this;e.showLoading({});var n=t.formData.phone,o=getApp().globalData.token;e.request({url:getApp().globalData.BASE_URL+"/sendCode",data:{token:o,phone:n},header:{},success:function(n){if(console.log(n),e.hideLoading(),444===n.data.status)e.showToast({title:"您的登录信息已过期，请重新登录",duration:2e3,icon:"none",success:function(){setTimeout((function(){e.reLaunch({url:"/pages/login/login"})}),2e3)}});else if(445===n.data.status)e.showToast({title:"您没有此操作权限",duration:2e3,icon:"none"});else if(1===n.data){e.showToast({title:"发送成功",duration:2e3}),t.captchaText="重新获取",t.time=60;var o=setInterval((function(){t.time--,0==t.time&&clearInterval(o)}),1e3)}else e.showToast({title:"发送失败",duration:2e3,icon:"none"})}})}}},created:function(){this.formData.id=getApp().globalData.user.id,this.formData.phone=getApp().globalData.user.phone}};t.default=n}).call(this,n("543d")["default"])},b543:function(e,t,n){"use strict";var o=n("de96"),a=n.n(o);a.a},dbcd:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"5b58"))},uniFormsItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(n.bind(null,"b1e2"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"f53b"))}},a=function(){var e=this,t=e.$createElement;e._self._c},s=[]},de96:function(e,t,n){},f665:function(e,t,n){"use strict";n.r(t);var o=n("824c"),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},fccd:function(e,t,n){"use strict";n.r(t);var o=n("dbcd"),a=n("f665");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("b543");var i,r=n("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=u.exports}},[["7feb","common/runtime","common/vendor"]]]);